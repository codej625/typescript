# 인터페이스에서의 옵셔널

<br />
<br />

* 공통으로 사용하기 위한 인터페이스의 문제 발생?

---

```
여러 컴포넌트에서 공통으로 사용되는 Props를 처리하기 위해
인터페이스를 만들었을 때 어떤 문제가 발생할까?

가장 흔하게 발생하는 문제는 Optional Property 문제일 것이다.

정의한 인터페이스에 속성값이 없을 때 발생하는 에러이다.

조금 더 유연하고 유통성 있는 인터페이스를 만들어보자.
```

<br />
<br />
<br />
<br />

1. 옵셔널 속성 사용

```
여러 컴포넌트에서,
공통으로 사용하는 인터페이스를 만들었다.
```

```ts
// Dialog에 사용되는 Props를 위한 공통 인터페이스

export interface DialogProps {
  id: string;
  open: boolean;
  onClose: () => void;
  modalMode: React.Dispatch<React.SetStateAction<boolean>>;
}
```

<br />

```
위에서 문제는 한 가지 속성이라도 값이 없으면 에러가 생긴다.

인터페이스의 모든 값이 항상 필요하지 않을 수 있다.

이때, 속성을 옵셔널으로 정의한 다음 "이 속성이 없을 수도 있다"라고 알려주면,
타입 상으론 undefined일 수 있다고 간주한다.
```

```ts
export interface DialogProps {
  id: string;
  open: boolean;
  onClose: () => void;
  modalMode?: React.Dispatch<React.SetStateAction<boolean>>; // 옵셔널 타입으로 변경
}
```

<br />
<br />
<br />

2. 반대의 상황

```
이번에는 Optional Property을 해결하는 방법을 알아보자.

상황에 맞게 여러 방법들 중 한 가지를 선택하면 된다.
```

```ts
// 1번 방법 -> modalMode가 항상 필요하다면, DialogProps에서 ?를 제거해서 필수로 만든다.

export interface DialogProps {
  id: string;
  open: boolean;
  onClose: () => void;
  modalMode: React.Dispatch<React.SetStateAction<boolean>>; // 필수로 변경 (가장 간단)
}
```

<br />

```ts
// 2번 방법 -> 속성값을 사용하는 곳에서 옵셔널 체이닝을 사용한다.

const handleEditClick = () => {
  modalMode?.(true); // modalMode가 undefined이면 호출 안 함
  setIsEditing(true);
};
```

<br />

```ts
// 3번 방법 -> 타입 단언 사용 modalMode가 절대 undefined가 아니라고 확신한다면, 타입 단언으로 강제한다.

const handleEditClick = () => {
  // 이건 "내가 책임질게"라는 뜻이라, 만약 실제로 undefined가 들어오면 런타임 에러가 날 수 있다. (권장 X)
  (modalMode as React.Dispatch<React.SetStateAction<boolean>>)(true);
  setIsEditing(true);
};
```

<br />

```ts
// 4번 방법 -> 기본값 제공

const DetailDialog = ({
  id,
  open,
  onClose,
  modalMode = () => {}, // 기본 빈 함수
}: DialogProps) => {

  // ...

  const handleEditClick = () => {
    modalMode(true); // 안전하게 호출 가능
    setIsEditing(true);
  };
};
```

<br />

```ts
// 5번 방법 -> Non-null Assertion Operator ("절대 null이나 undefined가 아니야"라고 단언)

const handleEditClick = () => {
  modalMode!(true); // ! 느낌표를 사용해서 undefined 가능성 제거
  setIsEditing(true);
};

// modalMode가 실제로 undefined면 런타임 에러가 발생할 수 있다. (권장 X)
```
